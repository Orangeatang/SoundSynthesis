#pragma once

//////////////////////////////////////////////////////////////////////////
/// Includes
//////////////////////////////////////////////////////////////////////////

#include "IAudioObject.h"


//////////////////////////////////////////////////////////////////////////
/// Forward Declarations
//////////////////////////////////////////////////////////////////////////

class CSoundSystem;


//////////////////////////////////////////////////////////////////////////
/// CAudioSource
//////////////////////////////////////////////////////////////////////////

class CAudioSource : public IAudioObject
{
public:

    //////////////////////////////////////////////////////////////////////////

    CAudioSource( CSoundSystem* aSoundSystem, UINT32 someFlags = 0 );
    virtual ~CAudioSource();

    //////////////////////////////////////////////////////////////////////////

    IXAudio2SourceVoice*    GetVoice() const;
    XAUDIO2_BUFFER*         GetBuffer() const;


protected :

    //////////////////////////////////////////////////////////////////////////

    void                    InitializeBuffer( UINT32 aByteCount, UINT32 someFlags );
    bool                    CreateVoice() override;

    //////////////////////////////////////////////////////////////////////////

    IXAudio2SourceVoice*    myVoice;
    XAUDIO2_BUFFER*         myAudioBuffer;
    WAVEFORMATEX            myWaveFormat;
};

//////////////////////////////////////////////////////////////////////////
